<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>[HELIOS] $17 Million NTC Competition Leaderboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet"/>
  <style>
    .font-lato { font-family: 'Lato', sans-serif; }
    th.sortable { cursor: pointer; user-select: none; }
    .table-with-suns {
      position: relative;
      overflow: visible; /* allow tooltip */
    }
    .table-with-suns::after {
      content: '';
      position: absolute;
      inset: 0;
      background: url('assets/suns.png') center/cover no-repeat;
      opacity: 0.07;
      pointer-events: none;
      z-index: 1;
    }
    .table-with-suns tr { position: relative; z-index: 0; }
    .table-with-suns th,
    .table-with-suns td { position: relative; z-index: 2; }
  </style>
</head>
<body class="bg-slate-900 text-gray-200 font-sans min-h-screen p-8">
  <h1 class="text-4xl font-extrabold mb-2 text-yellow-400">
    [HELIOS] $17 Million NTC Competition Leaderboard
  </h1>
  <p class="text-sm italic text-gray-400 mb-6">
    Last updated: <span id="updated-at" class="font-mono">Loadingâ€¦</span>
  </p>

  <div class="flex space-x-6">
    <!-- LEFT: Tabs + Leaderboard -->
    <div class="w-3/4">
      <!-- Top Tabs -->
      <div class="flex mb-0">
        <button id="tab-tourney"
                class="px-4 py-2 rounded-t-lg border border-slate-700 border-b-0">
          Tournament
        </button>
        <button id="tab-streak"
                class="px-4 py-2 rounded-t-lg border border-slate-700 border-b-0 ml-2">
          Streaks
        </button>
      </div>

      <!-- Panel under tabs -->
      <div class="bg-slate-800 border border-slate-700 border-t-0 rounded-bl-lg rounded-br-lg rounded-tr-lg overflow-visible">
        <!-- Sub-tabs header -->
        <div id="subtabs" class="relative flex border-b border-slate-700 px-4 py-2">
          <!-- Tournament date -->
          <div id="sub-tourney" class="inline-flex border border-slate-700 rounded-lg overflow-hidden">
            <button id="sub-date"
                    class="px-3 py-1 text-sm bg-yellow-400 text-gray-900">
              6/26/25 - 7/23/25
            </button>
          </div>
          <!-- Streak subtoggles -->
          <div id="sub-streaks" class="hidden inline-flex border border-slate-700 rounded-lg overflow-hidden ml-1">
            <button id="sub-current"
                    class="px-3 py-1 text-sm bg-yellow-400 text-gray-900">
              Current
            </button>
            <button id="sub-all"
                    class="px-3 py-1 text-sm bg-slate-700 text-gray-400 hover:bg-slate-600 hover:text-yellow-400">
              All Time
            </button>
          </div>
          <!-- Question-mark icon, only for streaks -->
          <span id="tooltip-icon" class="hidden absolute right-2 top-1/2 transform -translate-y-1/2 group inline-block">
            <span class="block w-5 h-5 rounded-full bg-gray-600 text-gray-400 flex items-center justify-center text-xs font-bold cursor-default">?</span>
            <span class="hidden group-hover:block absolute right-full bottom-1 mr-2 w-72 p-2 text-xs text-gray-300 bg-slate-800 border-2 border-yellow-400 rounded-lg whitespace-normal z-50">
              A streak is the number of consecutive days a player has logged in and completed at least one race. Each day ends at approximately 12:00 AM PST/PDT. Check back in an hour or two if you've raced today but your streak hasn't updated yet.
            </span>
          </span>
        </div>

        <!-- Table container with sun background + overflow-hidden -->
        <div id="table-container" class="table-with-suns overflow-hidden">
          <!-- scaled table -->
          <table
            class="w-full table-fixed origin-top-left transform
                   lg:scale-100 md:scale-90 sm:scale-75">
            <thead id="leaderboard-head" class="bg-slate-700"></thead>
            <tbody id="leaderboard-body" class="divide-y divide-slate-700"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- RIGHT: Info Boxes -->
    <div class="w-1/4 space-y-6">
      <div class="bg-slate-800 border-2 border-yellow-400 rounded-lg p-4 text-center">
        <div
          id="countdown"
          class="text-[clamp(1rem,5vw,2.25rem)]
                 whitespace-normal break-words
                 font-extrabold text-yellow-400 mb-1">
        </div>
        <div class="text-sm text-yellow-400 mb-2">days left in tournament</div>
        <button id="toggle-countdown"
                class="px-2 py-0.5 bg-gray-700 text-xs rounded mt-1">
          Show days only
        </button>
        <div class="text-xs text-gray-400 mt-2">
          June 25th 8 AM (PST/PDT) - July 23rd 8 AM (PST/PDT)
        </div>
      </div>

      <!-- ... rest unchanged ... -->
    </div>
  </div>

  <script>
    // --- Countdown (unchanged) ---
    const cdEl = document.getElementById('countdown'),
          btn  = document.getElementById('toggle-countdown');
    let exact = true;
    function updateCd() {
      const end  = new Date('2025-07-23T08:00:00-07:00'),
            diff = Math.max(0, end - new Date()),
            days = Math.floor(diff/86400000),
            hrs  = Math.floor((diff%86400000)/3600000),
            mins = Math.floor((diff%3600000)/60000),
            secs = Math.floor((diff%60000)/1000);
      cdEl.textContent = exact
        ? `${String(days).padStart(2,'0')}:`
          +`${String(hrs).padStart(2,'0')}:`
          +`${String(mins).padStart(2,'0')}:`
          +`${String(secs).padStart(2,'0')}`
        : days;
    }
    btn.addEventListener('click', ()=>{
      exact = !exact;
      btn.textContent = exact ? 'Show days only' : 'Show exact countdown';
      updateCd();
    });
    setInterval(updateCd, 1000);
    updateCd();

    // ... all your existing JS remains exactly as before ...
  </script>
</body>
</html>
