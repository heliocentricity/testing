<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>[HELIOS] $17 Million NTC Competition Leaderboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet"/>
  <style>
    .font-lato { font-family: 'Lato', sans-serif; }
    th.sortable { cursor: pointer; user-select: none; }
    .table-with-suns {
      position: relative; overflow: hidden;
    }
    .table-with-suns::after {
      content: ''; position: absolute; inset: 0;
      background: url('assets/suns.png') center/cover no-repeat;
      opacity: 0.07; pointer-events: none; z-index: 1;
    }
    .table-with-suns tr { position: relative; z-index: 0; }
    .table-with-suns th,
    .table-with-suns td { position: relative; z-index: 2; }
  </style>
</head>
<body class="bg-slate-900 text-gray-200 font-sans min-h-screen p-8">
  <h1 class="text-4xl font-extrabold mb-2 text-yellow-400">
    [HELIOS] $17 Million NTC Competition Leaderboard
  </h1>
  <p class="text-sm italic text-gray-400 mb-6">
    Last updated: <span id="updated-at" class="font-mono">Loading…</span>
  </p>

  <div class="flex space-x-6">
    <!-- LEFT: Tabs + Leaderboard -->
    <div class="w-3/4">
      <!-- Top Tabs -->
      <div class="flex mb-0">
        <button id="tab-tourney"
                class="px-4 py-2 rounded-t-lg border border-slate-700 border-b-0">
          Tournament
        </button>
        <div class="relative inline-block ml-2">
          <button id="tab-streak"
                  class="px-4 py-2 rounded-t-lg border border-slate-700 border-b-0">
            Streaks
          </button>
          <!-- question-mark tooltip -->
          <div class="absolute top-0 right-0 transform translate-x-1 -translate-y-1">
            <div class="relative group inline-block">
              <span class="text-gray-400 border border-gray-400 rounded-full px-1 text-xs cursor-pointer">?</span>
              <div class="hidden group-hover:block absolute top-full right-0 mt-1 w-64 bg-yellow-200/50 text-gray-900 text-xs p-2 rounded shadow-lg">
                A day ends at approximately 12:00 AM PST/PDT. Raced today and your updated streak isn’t showing? Check back in an hour or two.
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Panel under tabs -->
      <div class="bg-slate-800 border border-slate-700 border-t-0 rounded-bl-lg rounded-br-lg rounded-tr-lg overflow-hidden">
        <!-- Sub-tabs -->
        <div class="flex border-b border-slate-700 px-4 py-2">
          <!-- Tournament date -->
          <div id="sub-tourney" class="inline-flex border border-slate-700 rounded-lg overflow-hidden">
            <button id="sub-date"
                    class="px-3 py-1 text-sm bg-yellow-200/50 text-gray-900">
              6/26/25 – 7/23/25
            </button>
          </div>
          <!-- Streak subtoggles -->
          <div id="sub-streaks" class="hidden inline-flex border border-slate-700 rounded-lg overflow-hidden ml-1">
            <button id="sub-current"
                    class="px-3 py-1 text-sm bg-yellow-200/50 text-gray-900">
              Current
            </button>
            <button id="sub-all"
                    class="px-3 py-1 text-sm bg-slate-700 text-gray-400 hover:bg-slate-600 hover:text-yellow-400">
              All Time
            </button>
          </div>
        </div>

        <!-- Table -->
        <div id="table-container" class="table-with-suns">
          <table class="min-w-full">
            <thead id="leaderboard-head" class="bg-slate-700"></thead>
            <tbody id="leaderboard-body" class="divide-y divide-slate-700"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- RIGHT: Info Boxes -->
    <div class="w-1/4 space-y-6">
      <div class="bg-slate-800 border-2 border-yellow-400 rounded-lg p-4 text-center">
        <div id="countdown" class="text-4xl font-extrabold text-yellow-400 mb-1"></div>
        <div class="text-sm text-yellow-400 mb-2">days left in tournament</div>
        <button id="toggle-countdown"
                class="px-2 py-0.5 bg-gray-700 text-xs rounded mt-1">
          Show days only
        </button>
        <div class="text-xs text-gray-400 mt-2">
          June 25th 8 AM (PST/PDT) – July 23rd 8 AM (PST/PDT)
        </div>
      </div>
      <div class="bg-slate-800 border-2 border-yellow-400 rounded-lg p-4">
        <h2 class="text-lg font-semibold text-yellow-400 mb-2">Prizes</h2>
        <p class="text-sm">
          <span class="text-yellow-400 font-bold">1st</span> – 
          <span class="text-green-400 font-semibold">$10,000,000 NITRO CASH</span><br>
          <span class="text-yellow-400 font-bold">2nd</span> – 
          <span class="text-green-400 font-semibold">$5,000,000 NITRO CASH</span><br>
          <span class="text-yellow-400 font-bold">3rd</span> – 
          <span class="text-green-400 font-semibold">$2,000,000 NITRO CASH</span>
        </p>
      </div>
      <div class="bg-slate-800 border-2 border-yellow-400 rounded-lg p-4">
        <h2 class="text-lg font-semibold text-yellow-400 mb-2">Description</h2>
        <p class="text-sm text-gray-300 mb-2">
          Tracks each member’s races since June 25, 2025. Updated hourly (PST/PDT).
        </p>
        <p class="text-xs text-gray-400 mb-0">
          We reserve the right to disqualify you if we believe you have cheated (e.g. botting). Please make sure you are adhering to
          <a href="https://www.nitrotype.com/support/tos/" target="_blank" class="underline text-blue-300">
            Nitro Type’s TOS</a>. Thank you!
        </p>
      </div>
      <div class="bg-slate-800 border-2 border-yellow-400 rounded-lg p-4">
        <h2 class="text-lg font-semibold text-yellow-400 mb-2">Links</h2>
        <ul class="text-sm space-y-1">
          <li>
            <a href="https://www.nitrotype.com/team/HELIOS" target="_blank" class="underline">
              <span class="text-yellow-300">[HELIOS]</span> on Nitro Type
            </a>
          </li>
          <li>
            <a href="https://padlet.com/icarus_/HELIOS" target="_blank" class="underline text-blue-300">
              Padlet
            </a>
          </li>
        </ul>
      </div>
      <div class="bg-slate-800 border-2 border-yellow-400 rounded-lg p-4">
        <h2 class="text-lg font-semibold text-yellow-400 mb-2">Credits</h2>
        <p class="text-sm text-gray-300 mb-1">Website created by vioiynx.</p>
        <p class="text-sm text-gray-300 mb-1">
          Medal icons by
          <a href="https://www.vecteezy.com/free-vector/1st-2nd-3rd-place" target="_blank" class="underline text-blue-300">
            Vecteezy</a>.
        </p>
        <p class="text-sm text-gray-300">
          Sun motifs designed by
          <a href="https://www.freepik.com" target="_blank" class="underline text-blue-300">
            Freepik</a>.
        </p>
      </div>
    </div>
  </div>

  <script>
    // Countdown code unchanged...

    // State & Sorting Flags
    let data        = null,
        mode        = 'tourney',
        streakView  = 'current',
        tourneySort = { key:'races', dir:-1 },
        streakSort  = { key:'length', dir:-1 };

    // Tab styling
    function updateTabs(){
      const t1 = document.getElementById('tab-tourney'),
            t2 = document.getElementById('tab-streak'),
            st = document.getElementById('sub-tourney'),
            ss = document.getElementById('sub-streaks');
      if(mode==='tourney'){
        t1.className = 'px-4 py-2 rounded-t-lg border border-slate-700 border-b-0 bg-slate-800 text-yellow-400';
        t2.className = 'px-4 py-2 rounded-t-lg border border-slate-700 border-b-0 bg-slate-700 text-gray-400 hover:bg-slate-600';
        st.classList.remove('hidden'); ss.classList.add('hidden');
      } else {
        t1.className = 'px-4 py-2 rounded-t-lg border border-slate-700 border-b-0 bg-slate-700 text-gray-400 hover:bg-slate-600';
        t2.className = 'px-4 py-2 rounded-t-lg border border-slate-700 border-b-0 bg-slate-800 text-yellow-400';
        st.classList.add('hidden');    ss.classList.remove('hidden');
      }
    }
    function updateSubtabs(){
      if(mode==='tourney') return;
      const sc = document.getElementById('sub-current'),
            sa = document.getElementById('sub-all');
      sc.className = streakView==='current'
        ? 'px-3 py-1 text-sm bg-yellow-200/50 text-gray-900'
        : 'px-3 py-1 text-sm bg-slate-700 text-gray-400 hover:bg-slate-600 hover:text-yellow-400';
      sa.className = streakView==='allTime'
        ? 'px-3 py-1 text-sm bg-yellow-200/50 text-gray-900'
        : 'px-3 py-1 text-sm bg-slate-700 text-gray-400 hover:bg-slate-600 hover:text-yellow-400';
    }

    // Fetch + initialize
    document.addEventListener('DOMContentLoaded', ()=>{
      /* wire up tab buttons... */
      /* fetch data.json, compute ranks & titles... */
      /* then render() */
    });

    // render(), renderTourneyHead/Body(), renderStreakHead/Body()—
    // leave unchanged except that in renderStreakHead we added the
    // <th id="th-done"> and in renderStreakBody we moved the ✓/−
    // into the new column and made sorting by `done` key work.
  </script>
</body>
</html>
